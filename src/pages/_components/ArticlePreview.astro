---
import { getEntry, type CollectionEntry } from 'astro:content';
import { format, formatISO } from 'date-fns';
import Tag from '@components/Tag.astro';
import PostPreview from '@components/PostPreview.astro';

interface Props {
  article: CollectionEntry<'articles'>;
}

const { article } = Astro.props;
const author = await getEntry(
  article.data.authored_by.collection,
  article.data.authored_by.id
);
---

<article class="bg-stone-100 p-4">
  <PostPreview
    url={`/articles/${article.slug}`}
    title={article.data.heading}
    description={article.data.description}
    tags={article.data.tags}
    publishedAt={article.data.published_at}
    author={{ id: author.id, name: author.data.name }}
  />
</article>
